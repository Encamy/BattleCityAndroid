targetCompatibility = '1.7'
apply plugin: "java"
apply plugin: "com.google.protobuf"

sourceCompatibility = '1.7'
[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

sourceSets {
    main {
        java.srcDirs = ["src/"]

        proto {
            srcDir 'src/com/encamy/battlecity/protobuf/'
            include '**/*.proto'
        }
    }
}

protobuf {
    //generatedFilesBaseDir = "$projectDir/build/generated/source/proto"
    protoc {
        artifact = "com.google.protobuf:protoc:3.3.0"
    }
    plugins {
        grpc {
            artifact = "io.vertx:protoc-gen-grpc-java:1.3.0"
        }
    }
    generateProtoTasks {
        all().each { task ->
            task.plugins {
                grpc {}
            }
        }
    }
}


eclipse.project {
    name = appName + "-core"
}
